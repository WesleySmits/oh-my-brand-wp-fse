/**
 * Lightbox styles using native <dialog> element.
 *
 * @package theme-oh-my-brand
 */

/* Dialog reset and base styles */
.lightbox {
	--lightbox-bg: rgb(0 0 0 / 90%);
	--lightbox-text: #fff;
	--lightbox-button-bg: rgb(255 255 255 / 10%);
	--lightbox-button-hover-bg: rgb(255 255 255 / 20%);
	--lightbox-button-size: 48px;
	--lightbox-animation-duration: 200ms;
	--lightbox-gap: 1rem;

	position: fixed;
	inset: 0;
	width: 100%;
	max-width: 100%;
	height: 100%;
	max-height: 100%;
	margin: 0;
	padding: 0;
	border: none;
	background: var(--lightbox-bg);
	color: var(--lightbox-text);
	overflow: hidden;
}

/* Backdrop styles */
.lightbox::backdrop {
	background: transparent;
}

/* Opening animation */
.lightbox[open] {
	animation: lightbox-fade-in var(--lightbox-animation-duration) ease-out;
}

.lightbox[open] .lightbox__image {
	animation: lightbox-scale-in var(--lightbox-animation-duration) ease-out;
}

/* Closing animation */
.lightbox--closing {
	animation: lightbox-fade-out var(--lightbox-animation-duration) ease-in
		forwards;
}

.lightbox--closing .lightbox__image {
	animation: lightbox-scale-out var(--lightbox-animation-duration) ease-in
		forwards;
}

@keyframes lightbox-fade-in {
	from {
		opacity: 0%;
	}

	to {
		opacity: 100%;
	}
}

@keyframes lightbox-fade-out {
	from {
		opacity: 100%;
	}

	to {
		opacity: 0%;
	}
}

@keyframes lightbox-scale-in {
	from {
		transform: scale(0.95);
	}

	to {
		transform: scale(1);
	}
}

@keyframes lightbox-scale-out {
	from {
		transform: scale(1);
	}

	to {
		transform: scale(0.95);
	}
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
	.lightbox,
	.lightbox .lightbox__image,
	.lightbox--closing,
	.lightbox--closing .lightbox__image {
		animation: none;
	}
}

/* Container layout */
.lightbox__container {
	display: grid;
	grid-template-rows: auto 1fr auto;
	grid-template-columns: auto 1fr auto;
	width: 100%;
	height: 100%;
	padding: var(--lightbox-gap);
	box-sizing: border-box;
}

/* Close button */
.lightbox__close {
	grid-row: 1;
	grid-column: 3;
	display: flex;
	align-items: center;
	justify-content: center;
	width: var(--lightbox-button-size);
	height: var(--lightbox-button-size);
	padding: 0;
	border: none;
	border-radius: 50%;
	background: var(--lightbox-button-bg);
	color: var(--lightbox-text);
	cursor: pointer;
	transition: background-color 150ms ease;
	z-index: 10;
}

.lightbox__close:hover,
.lightbox__close:focus-visible {
	background: var(--lightbox-button-hover-bg);
}

.lightbox__close:focus-visible {
	outline: 2px solid var(--lightbox-text);
	outline-offset: 2px;
}

.lightbox__close svg {
	width: 24px;
	height: 24px;
}

/* Figure and image */
.lightbox__figure {
	grid-row: 2;
	grid-column: 1 / -1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	margin: 0;
	padding: var(--lightbox-gap) 0;
	min-height: 0;
}

.lightbox__image {
	max-width: 100%;
	max-height: 100%;
	width: auto;
	height: auto;
	object-fit: contain;
	border-radius: 4px;
}

/* Caption */
.lightbox__caption {
	margin-top: var(--lightbox-gap);
	padding: 0.5rem 1rem;
	font-size: 0.875rem;
	text-align: center;
	color: var(--lightbox-text);
	background: var(--lightbox-button-bg);
	border-radius: 4px;
	max-width: 600px;
}

.lightbox__caption[hidden] {
	display: none;
}

/* Navigation buttons */
.lightbox__nav {
	display: contents;
}

.lightbox__button {
	display: flex;
	align-items: center;
	justify-content: center;
	width: var(--lightbox-button-size);
	height: var(--lightbox-button-size);
	padding: 0;
	border: none;
	border-radius: 50%;
	background: var(--lightbox-button-bg);
	color: var(--lightbox-text);
	cursor: pointer;
	transition:
		background-color 150ms ease,
		opacity 150ms ease;
	z-index: 10;
}

.lightbox__button:hover:not(:disabled),
.lightbox__button:focus-visible {
	background: var(--lightbox-button-hover-bg);
}

.lightbox__button:focus-visible {
	outline: 2px solid var(--lightbox-text);
	outline-offset: 2px;
}

.lightbox__button:disabled {
	opacity: 30%;
	cursor: not-allowed;
}

.lightbox__button svg {
	width: 24px;
	height: 24px;
}

.lightbox__button--prev {
	grid-row: 2;
	grid-column: 1;
	align-self: center;
}

.lightbox__button--next {
	grid-row: 2;
	grid-column: 3;
	align-self: center;
}

/* Counter */
.lightbox__counter {
	grid-row: 3;
	grid-column: 1 / -1;
	text-align: center;
	font-size: 0.875rem;
	padding: 0.5rem;
	color: var(--lightbox-text);
	opacity: 80%;
}

/* Mobile adjustments */
@media (width <= 600px) {
	.lightbox {
		--lightbox-button-size: 40px;
		--lightbox-gap: 0.5rem;
	}

	.lightbox__close svg,
	.lightbox__button svg {
		width: 20px;
		height: 20px;
	}

	.lightbox__caption {
		font-size: 0.75rem;
		padding: 0.375rem 0.75rem;
	}
}

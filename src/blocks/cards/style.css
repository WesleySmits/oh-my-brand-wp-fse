/**
 * Cards Grid Block - Frontend Styles
 *
 * Uses BEM methodology, CSS custom properties, and container queries.
 * Container-first responsive approach for flexible component placement.
 *
 * @package theme-oh-my-brand
 */

/* ==========================================================================
   Cards Grid Block - Main Container
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards {
	/* Container query setup */
	container-type: inline-size;
	container-name: cards;

	/* Layout custom properties - columns used to calculate min-width */
	--cards-columns: 3;
	--cards-gap: clamp(1rem, 4cqi, 1.5rem);
	--cards-aspect-ratio: 4/3;

	/*
	 * Smart grid: min-width calculated from columns preference.
	 * Formula: smaller column count = larger min-width, more columns = smaller min-width.
	 */
	--cards-min-width: clamp(200px, calc(100% / var(--cards-columns) - var(--cards-gap)), 400px);

	/* Typography - fluid with clamp() using container query units */
	--cards-heading-size: clamp(1.5rem, 4cqi, 2.25rem);
	--cards-description-size: clamp(0.9375rem, 2cqi, 1.125rem);
	--cards-title-size: clamp(1rem, 3cqi, 1.25rem);
	--cards-text-size: clamp(0.8125rem, 2cqi, 0.9375rem);
	--cards-link-size: clamp(0.8125rem, 2cqi, 0.9375rem);

	/* Card styling - fluid padding */
	--cards-border-radius: var(--wp--custom--border-radius--medium, 0.5rem);
	--cards-padding: clamp(1rem, 3cqi, 1.5rem);
	--cards-transition: 0.2s ease;

	/* Icon - fluid sizing */
	--cards-icon-size: clamp(2.5rem, 5cqi, 3rem);
	--cards-icon-font-size: clamp(1.25rem, 2.5cqi, 1.5rem);

	/* Elevated style */
	--cards-shadow: 0 2px 8px rgb(0 0 0 / 10%);
	--cards-shadow-hover: 0 4px 16px rgb(0 0 0 / 15%);

	/* Outlined style */
	--cards-border-color: var(--wp--preset--color--contrast-2, #e0e0e0);
	--cards-border-color-hover: var(--wp--preset--color--contrast-3, #d0d0d0);

	/* Flat style */
	--cards-bg-flat: var(--wp--preset--color--base-2, #f5f5f5);

	/* Block layout */
	display: flex;
	flex-direction: column;
	gap: var(--cards-gap);
}

/* ==========================================================================
   Container Query Breakpoints
   ==========================================================================

   Fluid typography scales with container - no fixed column breakpoints needed.
   The auto-fit grid handles column count automatically based on --cards-min-width.
   ========================================================================== */

/* ==========================================================================
   Section Header
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__header {
	text-align: inherit;
}

.wp-block-theme-oh-my-brand-cards--align-center .wp-block-theme-oh-my-brand-cards__header {
	text-align: center;
}

.wp-block-theme-oh-my-brand-cards__heading {
	margin: 0 0 0.5rem;
	font-size: var(--cards-heading-size);
	line-height: 1.2;
}

.wp-block-theme-oh-my-brand-cards__description {
	margin: 0;
	color: var(--wp--preset--color--contrast-2, #666);
	font-size: var(--cards-description-size);
	line-height: 1.6;
}

/* ==========================================================================
   Cards Grid List
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__list {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(var(--cards-min-width), 1fr));
	gap: var(--cards-gap);
	padding: 0;
	margin: 0;
	list-style: none;
}

/* ==========================================================================
   Card Item
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__item {
	display: flex;
}

.wp-block-theme-oh-my-brand-cards__card {
	position: relative;
	display: flex;
	flex-direction: column;
	flex: 1;
	overflow: hidden;
	border-radius: var(--cards-border-radius);
	background-color: var(--wp--preset--color--base, #fff);
	transition:
		box-shadow var(--cards-transition),
		border-color var(--cards-transition),
		transform var(--cards-transition);
}

/* Equal height cards */
.wp-block-theme-oh-my-brand-cards--equal-height .wp-block-theme-oh-my-brand-cards__card {
	height: 100%;
}

/* ==========================================================================
   Card Styles - Elevated
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards--style-elevated .wp-block-theme-oh-my-brand-cards__card {
	box-shadow: var(--cards-shadow);
}

.wp-block-theme-oh-my-brand-cards--style-elevated .wp-block-theme-oh-my-brand-cards__card:hover {
	box-shadow: var(--cards-shadow-hover);
	transform: translateY(-2px);
}

/* ==========================================================================
   Card Styles - Outlined
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards--style-outlined .wp-block-theme-oh-my-brand-cards__card {
	border: 1px solid var(--cards-border-color);
}

.wp-block-theme-oh-my-brand-cards--style-outlined .wp-block-theme-oh-my-brand-cards__card:hover {
	border-color: var(--cards-border-color-hover);
}

/* ==========================================================================
   Card Styles - Flat
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards--style-flat .wp-block-theme-oh-my-brand-cards__card {
	background-color: var(--cards-bg-flat);
}

/* ==========================================================================
   Card Image
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__image-wrapper {
	position: relative;
	overflow: hidden;
	aspect-ratio: var(--cards-aspect-ratio);
}

.wp-block-theme-oh-my-brand-cards__image {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* Image position - Top (default) */
.wp-block-theme-oh-my-brand-cards--image-top .wp-block-theme-oh-my-brand-cards__card {
	flex-direction: column;
}

/* Image position - Left */
.wp-block-theme-oh-my-brand-cards--image-left .wp-block-theme-oh-my-brand-cards__card {
	flex-direction: row;
}

.wp-block-theme-oh-my-brand-cards--image-left .wp-block-theme-oh-my-brand-cards__image-wrapper {
	flex: 0 0 40%;
	aspect-ratio: auto;
}

/* Stack images on top for narrow containers with left image position */
@container cards (max-width: 500px) {
	.wp-block-theme-oh-my-brand-cards--image-left .wp-block-theme-oh-my-brand-cards__card {
		flex-direction: column;
	}

	.wp-block-theme-oh-my-brand-cards--image-left .wp-block-theme-oh-my-brand-cards__image-wrapper {
		flex: none;
		aspect-ratio: var(--cards-aspect-ratio);
	}
}

/* Image position - Background */
.wp-block-theme-oh-my-brand-cards--image-background .wp-block-theme-oh-my-brand-cards__card {
	position: relative;
	min-height: clamp(200px, 30cqi, 300px);
}

.wp-block-theme-oh-my-brand-cards--image-background .wp-block-theme-oh-my-brand-cards__image-wrapper {
	position: absolute;
	inset: 0;
	aspect-ratio: auto;
}

.wp-block-theme-oh-my-brand-cards--image-background .wp-block-theme-oh-my-brand-cards__image-wrapper::after {
	position: absolute;
	inset: 0;
	background: linear-gradient(to top, rgb(0 0 0 / 70%) 0%, transparent 100%);
	content: '';
}

.wp-block-theme-oh-my-brand-cards--image-background .wp-block-theme-oh-my-brand-cards__content {
	position: relative;
	z-index: 1;
	margin-top: auto;
	color: var(--wp--preset--color--base, #fff);
}

/* ==========================================================================
   Card Icon
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: var(--cards-icon-size);
	height: var(--cards-icon-size);
	margin-bottom: var(--wp--preset--spacing--20, 0.75rem);
	border-radius: 50%;
	background-color: var(--wp--preset--color--primary, #06c);
	color: var(--wp--preset--color--base, #fff);
	font-size: var(--cards-icon-font-size);
}

.wp-block-theme-oh-my-brand-cards--align-center .wp-block-theme-oh-my-brand-cards__icon {
	margin-inline: auto;
}

/* ==========================================================================
   Card Content
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__content {
	display: flex;
	flex-direction: column;
	flex: 1;
	gap: clamp(0.5rem, 2cqi, 0.75rem);
	padding: var(--cards-padding);
}

.wp-block-theme-oh-my-brand-cards--align-center .wp-block-theme-oh-my-brand-cards__content {
	text-align: center;
	align-items: center;
}

.wp-block-theme-oh-my-brand-cards__card-title {
	margin: 0;
	font-size: var(--cards-title-size);
	font-weight: 600;
	line-height: 1.3;
}

.wp-block-theme-oh-my-brand-cards__card-description {
	flex: 1;
	margin: 0;
	color: var(--wp--preset--color--contrast-2, #666);
	font-size: var(--cards-text-size);
	line-height: 1.6;
}

/* ==========================================================================
   Card Link
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__link {
	display: inline-flex;
	gap: 0.25rem;
	align-items: center;
	margin-top: auto;
	padding-top: clamp(0.5rem, 2cqi, 0.75rem);
	color: var(--wp--preset--color--primary, #06c);
	font-size: var(--cards-link-size);
	font-weight: 500;
	text-decoration: none;
	transition: gap var(--cards-transition);
}

.wp-block-theme-oh-my-brand-cards__link:hover,
.wp-block-theme-oh-my-brand-cards__link:focus {
	gap: 0.5rem;
	text-decoration: underline;
}

.wp-block-theme-oh-my-brand-cards__link-arrow {
	transition: transform var(--cards-transition);
}

.wp-block-theme-oh-my-brand-cards__link:hover .wp-block-theme-oh-my-brand-cards__link-arrow {
	transform: translateX(2px);
}

/* Background image overlay link color */
.wp-block-theme-oh-my-brand-cards--image-background .wp-block-theme-oh-my-brand-cards__link {
	color: var(--wp--preset--color--base, #fff);
}

/* ==========================================================================
   Accessibility - Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
	.wp-block-theme-oh-my-brand-cards__card,
	.wp-block-theme-oh-my-brand-cards__link,
	.wp-block-theme-oh-my-brand-cards__link-arrow {
		transition: none;
	}

	.wp-block-theme-oh-my-brand-cards--style-elevated .wp-block-theme-oh-my-brand-cards__card:hover {
		transform: none;
	}
}

/* ==========================================================================
   Focus States
   ========================================================================== */

.wp-block-theme-oh-my-brand-cards__link:focus-visible {
	outline: 2px solid var(--wp--preset--color--primary, #06c);
	outline-offset: 2px;
}
